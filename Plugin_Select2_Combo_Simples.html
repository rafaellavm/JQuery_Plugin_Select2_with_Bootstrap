<html lang="pt-br">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>JQuery Plugin Select2 Combo Simples</title>
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/select2.4.0.8.full.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/select2.min.css">
    <link rel="stylesheet" type="text/css" href="css/site.css">
    <link rel="stylesheet" href="css/bootstrap/bootstrap.css">
    <script src="js/popper_1.12.9.min.js"></script>
    <script src="js/bootstrap/bootstrap.js"></script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-6 mt-5" id="alerta">
                <div class="alert alert-danger alert-dismissible" role="alert">
                    Digite somente números e de 1 a 5
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4  mb-2">
                <select id="carros" class="form-control">
                    <option value="1">Celta</option>
                    <option value="2">HB20</option>
                    <option value="3">Ford Ka</option>
                    <option value="4">Sandero</option>
                    <option value="5">Corolla</option>
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 ">
                <ul class="list-group mb-2">
                    <li class="list-group-item list-group-item-secondary">1 - Celta</li>
                    <li class="list-group-item list-group-item-success">2 - HB20</li>
                    <li class="list-group-item list-group-item-danger">3 - Ford Ka</li>
                    <li class="list-group-item list-group-item-warning">4 - Sandero</li>
                    <li class="list-group-item list-group-item-info">5 - Corolla</li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="btn-group mb-2" role="group" aria-label="Grupo de botoes">
                    <button type="button" class="btn btn-primary" id="btn_MostarCarroEscolhido" data-toggle="collapse"
                        data-target="#collapseMostrarCarroEscolhido" aria-expanded="false"
                        aria-controls="collapseMostrarCarroEscolhido">Mostrar carro escolhido</button>
                    <button type="button" class="btn btn-success" id="btn_HabilitarCarroEscolhido">Habilitar carro
                        escolhido</button>
                    <button type="button" class="btn btn-info" id="btn_LimparTudo">Limpar tudo</button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="collapse" id="collapseMostrarCarroEscolhido">
                    <div class="card card-body">
                        <p id="txtCarroEscolhido"> </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
<script type="text/javascript">

    $(document).ready(function () {
        console.clear();

        HabilitarOuDesativarAlert("none");

        $('select#carros').select2({
            //containerCssClass: '', //coloca alguma classe que deseja
            placeholder: {
                id: '-1', text: 'Selecione um carro'
            },
            allowClear: true,
           //disabled: true
        });     
    });

    document.getElementById('btn_HabilitarCarroEscolhido').addEventListener('click', HabilitarCarroEscolhido, false);
    document.getElementById('btn_MostarCarroEscolhido').addEventListener('click', MostrarCarroEscolhido, false);

    function MostrarCarroEscolhido() {

        var texto = '';
        document.querySelector('p#txtCarroEscolhido').innerHTML = '';
        var carroSelecionado = $('#carros').select2('data');
        var identificadorDoCarroSelecionado = carroSelecionado[0].id;
        var nomeDoCarroSelecionado = carroSelecionado[0].text;

        texto = document.querySelector('p#txtCarroEscolhido').innerHTML + 'O carro escolhido foi: <span class="font-weight-bold">' + identificadorDoCarroSelecionado + ' - ' + nomeDoCarroSelecionado + '</span>';
        document.querySelector('p#txtCarroEscolhido').innerHTML = texto;
    }

    function HabilitarCarroEscolhido() {

        $('#collapseMostrarCarroEscolhido').collapse("hide");

        /*var carroEscolhido = document.getElementById('txtCarroEscolhido').value;

        if (ValidarCarroEscolhido(carroEscolhido)) {
            HabilitarOuDesativarAlert("none");

            var carroSelecionado = $('#carros').select2('data');

            document.querySelector('p#resultado').textContent = "O carro escolhido é: ";
        }
        else {
            HabilitarOuDesativarAlert("block");
            document.querySelector('p#resultado').textContent = "";
        }*/

        //$('#carros').select2().val(valor);
        //$('#carros').select2().trigger('change');

        //var data = $('#carros').select2('data');
        // $("p#resultado").text("O carro 'Volvo' será SEMPRE selecionado: " + data[0].text);
    }

    function ValidarCarroEscolhido(carroEscolhido) {

        if (!isNaN(parseFloat(carroEscolhido)) && isFinite(carroEscolhido)) {
            if (carroEscolhido > 0 && carroEscolhido < 6)
                return true;
        }
        else
            return false;
    }

    function HabilitarOuDesativarAlert(status) {

        document.getElementById('alerta').style.display = status;
    }

    $('#alerta').on('closed.bs.alert', function () {
        alert('fechou');
    });

    $("#carros").change(function () {
        //itens que foram selecionados
        var itensSelecionados = $('#carros').select2('data');
    });


</script>